import json
import pprint
import re
import datetime
# s ="""{'_api': <tweepy.api.API object at 0x000001F465A276D0>, '_json': {'created_at': 'Fri Jan 14 23:51:15 +0000 2022', 'id': 1482138273883602955, 'id_str': '1482138273883602955', 'text': '@hadleyjohn @PenFarthing @VirendraSharma Speaking on behalf of the UK and the Taliban too Not only spiteful but delusional too.', 'truncated': False, 'entities': {'hashtags': [], 'symbols': [], 'user_mentions': [{'screen_name': 'hadleyjohn', 'name': 'john hadley', 'id': 197203030, 'id_str': '197203030', 'indices': [0, 11]}, {'screen_name': 'PenFarthing', 'name': 'Pen Farthing', 'id': 312504426, 'id_str': '312504426', 'indices': [12, 24]}, {'screen_name': 'VirendraSharma', 'name': 'Virendra Sharma MP', 'id': 23452598, 'id_str': '23452598', 'indices': [25, 40]}], 'urls': []}, 'source': '<a href="https://mobile.twitter.com" rel="nofollow">Twitter Web App</a>', 'in_reply_to_status_id': 1481639351331082243, 'in_reply_to_status_id_str': '1481639351331082243', 'in_reply_to_user_id': 197203030, 'in_reply_to_user_id_str': '197203030', 'in_reply_to_screen_name': 'hadleyjohn', 'user': {'id': 1437366686089424896, 'id_str': '1437366686089424896', 'name': 'missyalexandra', 'screen_name': 'missyalexandra4', 'location': '', 'description': '', 'url': None, 'entities': {'description': {'urls': []}}, 'protected': False, 'followers_count': 77, 'friends_count': 17, 'listed_count': 0, 'created_at': 'Mon Sep 13 10:45:15 +0000 2021', 'favourites_count': 22461, 'utc_offset': None, 'time_zone': None, 'geo_enabled': False, 'verified': False, 'statuses_count': 3096, 'lang': None, 'contributors_enabled': False, 'is_translator': False, 'is_translation_enabled': False, 'profile_background_color': 'F5F8FA', 'profile_background_image_url': None, 'profile_background_image_url_https': None, 'profile_background_tile': False, 'profile_image_url': 'http://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png', 'profile_image_url_https': 'https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png', 'profile_link_color': '1DA1F2', 'profile_sidebar_border_color': 'C0DEED', 'profile_sidebar_fill_color': 'DDEEF6', 'profile_text_color': '333333', 'profile_use_background_image': True, 'has_extended_profile': True, 'default_profile': True, 'default_profile_image': True, 'following': False, 'follow_request_sent': False, 'notifications': False, 'translator_type': 'none', 'withheld_in_countries': []}, 'geo': None, 'coordinates': None, 'place': None, 'contributors': None, 'is_quote_status': False, 'retweet_count': 0, 'favorite_count': 0, 'favorited': False, 'retweeted': False, 'lang': 'en'}, 'created_at': datetime.datetime(2022, 1, 14, 23, 51, 15, tzinfo=datetime.timezone.utc), 'id': 1482138273883602955, 'id_str': '1482138273883602955', 'text': '@hadleyjohn @PenFarthing @VirendraSharma Speaking on behalf of the UK and the Taliban too Not only spiteful but delusional too.', 'truncated': False, 'entities': {'hashtags': [], 'symbols': [], 'user_mentions': [{'screen_name': 'hadleyjohn', 'name': 'john hadley', 'id': 197203030, 'id_str': '197203030', 'indices': [0, 11]}, {'screen_name': 'PenFarthing', 'name': 'Pen Farthing', 'id': 312504426, 'id_str': '312504426', 'indices': [12, 24]}, {'screen_name': 'VirendraSharma', 'name': 'Virendra Sharma MP', 'id': 23452598, 'id_str': '23452598', 'indices': [25, 40]}], 'urls': []}, 'source': 'Twitter Web App', 'source_url': 'https://mobile.twitter.com', 'in_reply_to_status_id': 1481639351331082243, 'in_reply_to_status_id_str': '1481639351331082243', 'in_reply_to_user_id': 197203030, 'in_reply_to_user_id_str': '197203030', 'in_reply_to_screen_name': 'hadleyjohn', 'author': User(_api=<tweepy.api.API object at 0x000001F465A276D0>, _json={'id': 1437366686089424896, 'id_str': '1437366686089424896', 'name': 'missyalexandra', 'screen_name': 'missyalexandra4', 'location': '', 'description': '', 'url': None, 'entities': {'description': {'urls': []}}, 'protected': False, 'followers_count': 77, 'friends_count': 17, 'listed_count': 0, 'created_at': 'Mon Sep 13 10:45:15 +0000 2021', 'favourites_count': 22461, 'utc_offset': None, 'time_zone': None, 'geo_enabled': False, 'verified': False, 'statuses_count': 3096, 'lang': None, 'contributors_enabled': False, 'is_translator': False, 'is_translation_enabled': False, 'profile_background_color': 'F5F8FA', 'profile_background_image_url': None, 'profile_background_image_url_https': None, 'profile_background_tile': False, 'profile_image_url': 'http://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png', 'profile_image_url_https': 'https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png', 'profile_link_color': '1DA1F2', 'profile_sidebar_border_color': 'C0DEED', 'profile_sidebar_fill_color': 'DDEEF6', 'profile_text_color': '333333', 'profile_use_background_image': True, 'has_extended_profile': True, 'default_profile': True, 'default_profile_image': True, 'following': False, 'follow_request_sent': False, 'notifications': False, 'translator_type': 'none', 'withheld_in_countries': []}, id=1437366686089424896, id_str='1437366686089424896', name='missyalexandra', screen_name='missyalexandra4', location='', description='', url=None, entities={'description': {'urls': []}}, protected=False, followers_count=77, friends_count=17, listed_count=0, created_at=datetime.datetime(2021, 9, 13, 10, 45, 15, tzinfo=datetime.timezone.utc), favourites_count=22461, utc_offset=None, time_zone=None, geo_enabled=False, verified=False, statuses_count=3096, lang=None, contributors_enabled=False, is_translator=False, is_translation_enabled=False, profile_background_color='F5F8FA', profile_background_image_url=None, profile_background_image_url_https=None, profile_background_tile=False, profile_image_url='http://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png', profile_image_url_https='https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png', profile_link_color='1DA1F2', profile_sidebar_border_color='C0DEED', profile_sidebar_fill_color='DDEEF6', profile_text_color='333333', profile_use_background_image=True, has_extended_profile=True, default_profile=True, default_profile_image=True, following=False, follow_request_sent=False, notifications=False, translator_type='none', withheld_in_countries=[]), 'user': User(_api=<tweepy.api.API object at 0x000001F465A276D0>, _json={'id': 1437366686089424896, 'id_str': '1437366686089424896', 'name': 'missyalexandra', 'screen_name': 'missyalexandra4', 'location': '', 'description': '', 'url': None, 'entities': {'description': {'urls': []}}, 'protected': False, 'followers_count': 77, 'friends_count': 17, 'listed_count': 0, 'created_at': 'Mon Sep 13 10:45:15 +0000 2021', 'favourites_count': 22461, 'utc_offset': None, 'time_zone': None, 'geo_enabled': False, 'verified': False, 'statuses_count': 3096, 'lang': None, 'contributors_enabled': False, 'is_translator': False, 'is_translation_enabled': False, 'profile_background_color': 'F5F8FA', 'profile_background_image_url': None, 'profile_background_image_url_https': None, 'profile_background_tile': False, 'profile_image_url': 'http://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png', 'profile_image_url_https': 'https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png', 'profile_link_color': '1DA1F2', 'profile_sidebar_border_color': 'C0DEED', 'profile_sidebar_fill_color': 'DDEEF6', 'profile_text_color': '333333', 'profile_use_background_image': True, 'has_extended_profile': True, 'default_profile': True, 'default_profile_image': True, 'following': False, 'follow_request_sent': False, 'notifications': False, 'translator_type': 'none', 'withheld_in_countries': []}, id=1437366686089424896, id_str='1437366686089424896', name='missyalexandra', screen_name='missyalexandra4', location='', description='', url=None, entities={'description': {'urls': []}}, protected=False, followers_count=77, friends_count=17, listed_count=0, created_at=datetime.datetime(2021, 9, 13, 10, 45, 15, tzinfo=datetime.timezone.utc), favourites_count=22461, utc_offset=None, time_zone=None, geo_enabled=False, verified=False, statuses_count=3096, lang=None, contributors_enabled=False, is_translator=False, is_translation_enabled=False, profile_background_color='F5F8FA', profile_background_image_url=None, profile_background_image_url_https=None, profile_background_tile=False, profile_image_url='http://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png', profile_image_url_https='https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png', profile_link_color='1DA1F2', profile_sidebar_border_color='C0DEED', profile_sidebar_fill_color='DDEEF6', profile_text_color='333333', profile_use_background_image=True, has_extended_profile=True, default_profile=True, default_profile_image=True, following=False, follow_request_sent=False, notifications=False, translator_type='none', withheld_in_countries=[]), 'geo': None, 'coordinates': None, 'place': None, 'contributors': None, 'is_quote_status': False, 'retweet_count': 0, 'favorite_count': 0, 'favorited': False, 'retweeted': False, 'lang': 'en'}"""
# s2 = """{'_api': <tweepy.api.API object at 0x000001F465A3FEE0>, '_json': {'created_at': 'Sat Jan 01 17:44:15 +0000 2022', 'id': 1477334872297332737, 'id_str': '1477334872297332737', 'text': '@RajeshAgrawal @JalebiJunction @VirendraSharma @DrOnkarSahotaAM Happy new year Rajesh Ji ! Wish you a great 2022', 'truncated': False, 'entities': {'hashtags': [], 'symbols': [], 'user_mentions': [{'screen_name': 'RajeshAgrawal', 'name': 'Rajesh Agrawal', 'id': 240272248, 'id_str': '240272248', 'indices': [0, 14]}, {'screen_name': 'JalebiJunction', 'name': 'Jalebi Junction', 'id': 1655408004, 'id_str': '1655408004', 'indices': [15, 30]}, {'screen_name': 'VirendraSharma', 'name': 'Virendra Sharma MP', 'id': 23452598, 'id_str': '23452598', 'indices': [31, 46]}, {'screen_name': 'DrOnkarSahotaAM', 'name': 'Onkar Sahota AM', 'id': 361283211, 'id_str': '361283211', 'indices': [47, 63]}], 'urls': []}, 'source': '<a href="http://twitter.com/download/iphone" rel="nofollow">Twitter for iPhone</a>', 'in_reply_to_status_id': 1477331886905176071, 'in_reply_to_status_id_str': '1477331886905176071', 'in_reply_to_user_id': 240272248, 'in_reply_to_user_id_str': '240272248', 'in_reply_to_screen_name': 'RajeshAgrawal', 'user': {'id': 1335312580609331200, 'id_str': '1335312580609331200', 'name': 'Dr. Akkshye Tulsyan', 'screen_name': 'AkkshyeTulsyan', 'location': 'Karnataka, India', 'description': 'The alchemy of all alchemies is gratitude.\nAngel Investor, Industrialist\n\nTweets about Diplomacy, Entrepreneurship & Fatherhood.', 'url': None, 'entities': {'description': {'urls': []}}, 'protected': False, 'followers_count': 1442, 'friends_count': 826, 'listed_count': 0, 'created_at': 'Sat Dec 05 19:58:49 +0000 2020', 'favourites_count': 3681, 'utc_offset': None, 'time_zone': None, 'geo_enabled': False, 'verified': False, 'statuses_count': 2842, 'lang': None, 'contributors_enabled': False, 'is_translator': False, 'is_translation_enabled': False, 'profile_background_color': 'F5F8FA', 'profile_background_image_url': None, 'profile_background_image_url_https': None, 'profile_background_tile': False, 'profile_image_url': 'http://pbs.twimg.com/profile_images/1554320614399234048/aW9aUFKv_normal.jpg', 'profile_image_url_https': 'https://pbs.twimg.com/profile_images/1554320614399234048/aW9aUFKv_normal.jpg', 'profile_banner_url': 'https://pbs.twimg.com/profile_banners/1335312580609331200/1637161187', 'profile_link_color': '1DA1F2', 'profile_sidebar_border_color': 'C0DEED', 'profile_sidebar_fill_color': 'DDEEF6', 'profile_text_color': '333333', 'profile_use_background_image': True, 'has_extended_profile': True, 'default_profile': True, 'default_profile_image': False, 'following': False, 'follow_request_sent': False, 'notifications': False, 'translator_type': 'none', 'withheld_in_countries': []}, 'geo': None, 'coordinates': None, 'place': None, 'contributors': None, 'is_quote_status': False, 'retweet_count': 0, 'favorite_count': 0, 'favorited': False, 'retweeted': False, 'lang': 'en'}, 'created_at': datetime.datetime(2022, 1, 1, 17, 44, 15, tzinfo=datetime.timezone.utc), 'id': 1477334872297332737, 'id_str': '1477334872297332737', 'text': '@RajeshAgrawal @JalebiJunction @VirendraSharma @DrOnkarSahotaAM Happy new year Rajesh Ji ! Wish you a great 2022', 'truncated': False, 'entities': {'hashtags': [], 'symbols': [], 'user_mentions': [{'screen_name': 'RajeshAgrawal', 'name': 'Rajesh Agrawal', 'id': 240272248, 'id_str': '240272248', 'indices': [0, 14]}, {'screen_name': 'JalebiJunction', 'name': 'Jalebi Junction', 'id': 1655408004, 'id_str': '1655408004', 'indices': [15, 30]}, {'screen_name': 'VirendraSharma', 'name': 'Virendra Sharma MP', 'id': 23452598, 'id_str': '23452598', 'indices': [31, 46]}, {'screen_name': 'DrOnkarSahotaAM', 'name': 'Onkar Sahota AM', 'id': 361283211, 'id_str': '361283211', 'indices': [47, 63]}], 'urls': []}, 'source': 'Twitter for iPhone', 'source_url': 'http://twitter.com/download/iphone', 'in_reply_to_status_id': 1477331886905176071, 'in_reply_to_status_id_str': '1477331886905176071', 'in_reply_to_user_id': 240272248, 'in_reply_to_user_id_str': '240272248', 'in_reply_to_screen_name': 'RajeshAgrawal', 'author': User(_api=<tweepy.api.API object at 0x000001F465A3FEE0>, _json={'id': 1335312580609331200, 'id_str': '1335312580609331200', 'name': 'Dr. Akkshye Tulsyan', 'screen_name': 'AkkshyeTulsyan', 'location': 'Karnataka, India', 'description': 'The alchemy of all alchemies is gratitude.\nAngel Investor, Industrialist\n\nTweets about Diplomacy, Entrepreneurship & Fatherhood.', 'url': None, 'entities': {'description': {'urls': []}}, 'protected': False, 'followers_count': 1442, 'friends_count': 826, 'listed_count': 0, 'created_at': 'Sat Dec 05 19:58:49 +0000 2020', 'favourites_count': 3681, 'utc_offset': None, 'time_zone': None, 'geo_enabled': False, 'verified': False, 'statuses_count': 2842, 'lang': None, 'contributors_enabled': False, 'is_translator': False, 'is_translation_enabled': False, 'profile_background_color': 'F5F8FA', 'profile_background_image_url': None, 'profile_background_image_url_https': None, 'profile_background_tile': False, 'profile_image_url': 'http://pbs.twimg.com/profile_images/1554320614399234048/aW9aUFKv_normal.jpg', 'profile_image_url_https': 'https://pbs.twimg.com/profile_images/1554320614399234048/aW9aUFKv_normal.jpg', 'profile_banner_url': 'https://pbs.twimg.com/profile_banners/1335312580609331200/1637161187', 'profile_link_color': '1DA1F2', 'profile_sidebar_border_color': 'C0DEED', 'profile_sidebar_fill_color': 'DDEEF6', 'profile_text_color': '333333', 'profile_use_background_image': True, 'has_extended_profile': True, 'default_profile': True, 'default_profile_image': False, 'following': False, 'follow_request_sent': False, 'notifications': False, 'translator_type': 'none', 'withheld_in_countries': []}, id=1335312580609331200, id_str='1335312580609331200', name='Dr. Akkshye Tulsyan', screen_name='AkkshyeTulsyan', location='Karnataka, India', description='The alchemy of all alchemies is gratitude.\nAngel Investor, Industrialist\n\nTweets about Diplomacy, Entrepreneurship & Fatherhood.', url=None, entities={'description': {'urls': []}}, protected=False, followers_count=1442, friends_count=826, listed_count=0, created_at=datetime.datetime(2020, 12, 5, 19, 58, 49, tzinfo=datetime.timezone.utc), favourites_count=3681, utc_offset=None, time_zone=None, geo_enabled=False, verified=False, statuses_count=2842, lang=None, contributors_enabled=False, is_translator=False, is_translation_enabled=False, profile_background_color='F5F8FA', profile_background_image_url=None, profile_background_image_url_https=None, profile_background_tile=False, profile_image_url='http://pbs.twimg.com/profile_images/1554320614399234048/aW9aUFKv_normal.jpg', profile_image_url_https='https://pbs.twimg.com/profile_images/1554320614399234048/aW9aUFKv_normal.jpg', profile_banner_url='https://pbs.twimg.com/profile_banners/1335312580609331200/1637161187', profile_link_color='1DA1F2', profile_sidebar_border_color='C0DEED', profile_sidebar_fill_color='DDEEF6', profile_text_color='333333', profile_use_background_image=True, has_extended_profile=True, default_profile=True, default_profile_image=False, following=False, follow_request_sent=False, notifications=False, translator_type='none', withheld_in_countries=[]), 'user': User(_api=<tweepy.api.API object at 0x000001F465A3FEE0>, _json={'id': 1335312580609331200, 'id_str': '1335312580609331200', 'name': 'Dr. Akkshye Tulsyan', 'screen_name': 'AkkshyeTulsyan', 'location': 'Karnataka, India', 'description': 'The alchemy of all alchemies is gratitude.\nAngel Investor, Industrialist\n\nTweets about Diplomacy, Entrepreneurship & Fatherhood.', 'url': None, 'entities': {'description': {'urls': []}}, 'protected': False, 'followers_count': 1442, 'friends_count': 826, 'listed_count': 0, 'created_at': 'Sat Dec 05 19:58:49 +0000 2020', 'favourites_count': 3681, 'utc_offset': None, 'time_zone': None, 'geo_enabled': False, 'verified': False, 'statuses_count': 2842, 'lang': None, 'contributors_enabled': False, 'is_translator': False, 'is_translation_enabled': False, 'profile_background_color': 'F5F8FA', 'profile_background_image_url': None, 'profile_background_image_url_https': None, 'profile_background_tile': False, 'profile_image_url': 'http://pbs.twimg.com/profile_images/1554320614399234048/aW9aUFKv_normal.jpg', 'profile_image_url_https': 'https://pbs.twimg.com/profile_images/1554320614399234048/aW9aUFKv_normal.jpg', 'profile_banner_url': 'https://pbs.twimg.com/profile_banners/1335312580609331200/1637161187', 'profile_link_color': '1DA1F2', 'profile_sidebar_border_color': 'C0DEED', 'profile_sidebar_fill_color': 'DDEEF6', 'profile_text_color': '333333', 'profile_use_background_image': True, 'has_extended_profile': True, 'default_profile': True, 'default_profile_image': False, 'following': False, 'follow_request_sent': False, 'notifications': False, 'translator_type': 'none', 'withheld_in_countries': []}, id=1335312580609331200, id_str='1335312580609331200', name='Dr. Akkshye Tulsyan', screen_name='AkkshyeTulsyan', location='Karnataka, India', description='The alchemy of all alchemies is gratitude.\nAngel Investor, Industrialist\n\nTweets about Diplomacy, Entrepreneurship & Fatherhood.', url=None, entities={'description': {'urls': []}}, protected=False, followers_count=1442, friends_count=826, listed_count=0, created_at=datetime.datetime(2020, 12, 5, 19, 58, 49, tzinfo=datetime.timezone.utc), favourites_count=3681, utc_offset=None, time_zone=None, geo_enabled=False, verified=False, statuses_count=2842, lang=None, contributors_enabled=False, is_translator=False, is_translation_enabled=False, profile_background_color='F5F8FA', profile_background_image_url=None, profile_background_image_url_https=None, profile_background_tile=False, profile_image_url='http://pbs.twimg.com/profile_images/1554320614399234048/aW9aUFKv_normal.jpg', profile_image_url_https='https://pbs.twimg.com/profile_images/1554320614399234048/aW9aUFKv_normal.jpg', profile_banner_url='https://pbs.twimg.com/profile_banners/1335312580609331200/1637161187', profile_link_color='1DA1F2', profile_sidebar_border_color='C0DEED', profile_sidebar_fill_color='DDEEF6', profile_text_color='333333', profile_use_background_image=True, has_extended_profile=True, default_profile=True, default_profile_image=False, following=False, follow_request_sent=False, notifications=False, translator_type='none', withheld_in_countries=[]), 'geo': None, 'coordinates': None, 'place': None, 'contributors': None, 'is_quote_status': False, 'retweet_count': 0, 'favorite_count': 0, 'favorited': False, 'retweeted': False, 'lang': 'en'}"""
# pprint.pprint(s)
# print('\n\n\n')
# starts_with = "'_json':"
# ends_with = "'<"
# result = re.findall('\{}.*?\{}'.format(starts_with,ends_with), s)
# print(result)

def get_reply_name(str):
    replied_message = list()
    for i in (str.split("_json=")):
        data = (i.replace('\n', ' //'))
        try:
            data = data.split("'_json':")[1]
            data = data.split("'author'")[0]
        except:
            pass
        data = data.replace("'",'"')
        data = data.replace("True", '"TRUE"')
        data = data.replace("False", '"FALSE"')
        data = data.replace("None", '"NONE"')
        if data[-1] != '}':
            data = data+'}'
        # print(data)
        # print( type(json.loads(data))  , eval(data))
        new_data = (data.split(','))
        for nd in new_data:
            if 'in_reply' in nd:
                if 'NONE' not in nd:
                    replied_message.append( nd)
                    print(nd)
            if 'mention' in nd:
                print(nd)
    print('\n kk \n kk')
    return replied_message